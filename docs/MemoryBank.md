# InsuranceApp Memory Bank (업데이트)

이 문서는 InsuranceApp 개발 과정에서 쌓인 주요 설계 원칙, UI/UX, 기능, 데이터 처리, 반복 패턴, 성공/실패 사례 등을 기록합니다.

---

## 0. 핵심 개발 철학 및 교훈 (NEW)

### 조대표 핵심 철학
- **"맨땅에 해딩"**: 완벽주의 배제, 실용적 접근 우선
- **"단순함이 최고다"**: 복잡한 기능보다 핵심 가치 집중
- **사용자 중심**: 중장년층 친화적 설계가 모든 결정의 기준

### 검증된 성공 패턴
- **23회 성공 공식**: 단일 작업 + 실제 데이터 + 점진적 접근 + 명확한 검증
- **1,2,3,4 버튼 방식**: 복잡한 선택지 분리 없이 숫자 버튼으로 직관적 조작
- **문제+보기 통합 표시**: `<pre>` 태그로 원본 그대로 표시하여 가독성 향상

### 서대리 특성 기반 관리법
- **DO**: 데이터 검증 최우선, 기존 방식 100% 재현, 단계별 보고
- **DON'T**: 데이터 추출 생략 금지, 다중 작업 금지, 독단적 문제 해결 금지

---

## 1. UI/UX 설계 원칙 (확장)

### 중장년층 친화적 설계 (NEW)
- **큰 글씨**: 최소 16px 이상, 중요 버튼은 18px+
- **명확한 버튼**: 충분한 터치 영역 (최소 44px), 명확한 라벨
- **단순한 인터페이스**: 한 화면에 핵심 기능만, 불필요한 요소 제거
- **즉시 피드백**: 버튼 클릭, 정답 선택 시 즉각적 반응

### 화면 구성 및 배치
- **홈 화면**: 회차별 버튼(20~24회 등)과 통계 보기 버튼을 명확하게 배치
- **버튼 활성/비활성**: 선택된 회차 버튼은 파란색으로 구분, 비활성화 시 회색으로 표시
- **문제 풀이 화면**: 문제, 1,2,3,4 선택 버튼, 진행 상황, 통계 순서로 배치
- **통계 표시**: 우상단에 실시간 정답률, 오답률 표시
- **반응형 디자인**: 모바일/PC 모두 가독성 유지

---

## 2. 버튼 및 기능 설계 (강화)

### 핵심 기능 설계
- **회차별 버튼**: 각 회차별로 문제 데이터 연동, 선택 시 해당 회차 문제만 표시
- **1,2,3,4 숫자 버튼**: 복잡한 텍스트 대신 숫자로 선택지 단순화
- **즉시 피드백**: 선택 시 "정답입니다!" / "오답입니다!" 즉시 표시
- **홈 버튼**: 언제든 홈으로 돌아가기, 통계 완전 초기화

### 학습 플로우 (NEW)
```
홈 화면 (회차 선택)
    ↓
23회 클릭 (파란색 버튼)
    ↓
문제 1/10 (진행 상황 표시)
    ↓
1,2,3,4 버튼 선택
    ↓
즉시 피드백 + 통계 업데이트
    ↓
다음 문제 / 홈으로 선택
    ↓
결과 화면 (전체 정답 확인)
```

---

## 3. 통계 처리 방식 (수정)

### 실시간 통계 관리
- **메모리 기반**: localStorage 대신 JavaScript 변수로 세션 중 관리
- **실시간 갱신**: 문제 풀이 시마다 즉시 "정답: X개 | 오답: X개" 업데이트
- **완전 초기화**: 홈 버튼 클릭 시 모든 통계 리셋하여 재시작 가능

### 결과 화면 표시
- **종합 통계**: 총 문제 수, 정답 수, 오답 수
- **문제별 정답**: 각 문제의 정답 번호와 정답 내용 전체 표시
- **학습 완료감**: 모든 정답을 확인하여 복습 효과 제공

---

## 4. 데이터 연동 구조 (강화)

### IBEX ID 기반 데이터 체계 (NEW)
- **표준 형식**: IBEX_23_001_T1_S01_001 (서비스명_회차_인덱스_교시_과목_문제번호)
- **데이터 무결성**: 실제 마스터 데이터에서 정확한 추출 필수
- **확장성**: 1,439개 전체 문제 적용 가능한 구조

### 데이터 처리 프로세스
- **Excel → JSON 변환**: 마스터 데이터에서 필요한 회차 추출
- **구조 검증**: 기존 구조와 100% 동일한 필드명, 타입 확인
- **테스트 렌더링**: 변환 후 즉시 화면 표시 테스트 수행

### JSON 데이터 구조 (확정)
```json
[
  {
    "id": "IBEX_23_001",
    "question": "문제 내용 + 선택지 전체",
    "answer": 1,
    "answer_text": "정답 선택지 전체 내용"
  }
]
```

---

## 5. 반복 코드/패턴 (확장)

### 핵심 함수 패턴
- **showHome()**: 홈 화면 표시, 통계 완전 초기화
- **showQuestion()**: 현재 문제 화면 표시, 진행 상황 업데이트
- **showResult()**: 결과 화면 표시, 전체 정답 확인

### 이벤트 처리 패턴
- **회차 버튼 클릭**: 해당 회차 데이터 로딩, 문제 풀이 시작
- **선택지 클릭**: 정답 확인, 통계 업데이트, 즉시 피드백
- **홈 버튼**: 언제든 홈으로 복귀, 상태 완전 초기화

### 에러 처리 표준
- **데이터 로드 실패**: 기존 하드코딩 데이터로 fallback
- **JSON 파싱 오류**: 사용자에게 안내 메시지 표시
- **네트워크 오류**: 로컬 데이터 사용 안내

---

## 6. 주요 성공/실패 사례 (대폭 확장)

### 🏆 대성공 사례

#### 23회 10문제 실제 데이터 연동 (2025.06.20)
- **성공 요인**: 
  - 조대표의 "문제+보기 그대로 표시" 전략적 결정
  - 1,2,3,4 버튼 방식으로 복잡성 90% 감소
  - IBEX ID 체계 활용한 정확한 데이터 추출
- **성과**: 개발 시간 50% 단축, 완벽한 기능 구현
- **교훈**: 단순함이 복잡함보다 강력함

#### 브랜치 분리 전략 성공 (2025.06.20)
- **문제**: 서대리 무한루프, 컨텍스트 오염
- **해결**: feature/add-exam-21 브랜치 독립 환경
- **성과**: 1,439개 전체 문제 로딩 모듈 성공 구현
- **교훈**: 컨텍스트 분리가 개발 효율 극대화

### ❌ 실패 사례 및 교훈

#### 22회 확장 실패 (2025.06.19)
- **실패 요인**:
  - 서대리의 임시 데이터 사용 (실제 추출 생략)
  - 다중 작업 시도 (22회, 24회 동시 처리)
  - 기본 검증 단계 스킵
- **교훈**: 
  - 데이터 무결성이 모든 것의 기초
  - 성공 패턴을 정확히 재현해야 함
  - 편의를 위한 절차 생략은 더 큰 비효율 초래

#### 20회, 21회 무한루프 (2025.06.18-19)
- **근본 원인**: 누적된 컨텍스트로 인한 AI 자기모순
- **해결책**: 브랜치 분리로 컨텍스트 오염 차단
- **교훈**: AI 협업에서는 환경 분리가 필수

### 🔬 패턴 분석

#### 성공 패턴의 공통점
1. **단일 집중**: 한 번에 하나의 회차만 처리
2. **실제 데이터**: 마스터 데이터 직접 활용
3. **단계별 검증**: 각 단계마다 테스트 수행
4. **단순함 유지**: 복잡한 기능 추가 지양

#### 실패 패턴의 공통점
1. **절차 생략**: 기본 단계를 "번거롭다"며 스킵
2. **다중 작업**: 여러 과제 동시 처리 시도
3. **임시 방편**: 편의를 위한 가짜 데이터 사용
4. **과신**: 이전 성공 경험에 근거한 안일함

---

## 7. 브랜치 전략 및 협업 방법 (NEW)

### 브랜치 분리 전략
- **main**: 안정적 완성 버전만 유지
- **feature/add-exam-XX**: 회차별 독립 브랜치
- **컨텍스트 분리**: 각 브랜치에서 독립적 작업 환경

### 서대리 관리 방법론
- **3단계 검증 체계**: 0.5단계(데이터 추출) → 1.5단계(기존 방식 확인) → 2.5단계(기본 테스트)
- **30분 룰**: 30분 이상 막히면 즉시 상황 보고
- **기본 우선**: 데이터 무결성 > 검증된 방식 재사용 > 구현 완성도

### 팀 역할 분담
- **조대표**: 전략적 방향성, 최종 의사결정, 사용자 관점
- **노팀장**: 요구사항 정의, 아키텍처 설계, 품질 관리
- **서대리**: 코딩 전담, 데이터 처리, 구현 완성

---

## 8. 커서 고급 기능 활용 (NEW)

### Rules + Memory Banks 시스템
- **자동 규칙 적용**: 매번 설명 불필요, Git 기반 자동 동기화
- **영구 기억 보장**: 브랜치 변경에도 프로젝트 지식 보존
- **개발 효율 3-5배 향상**: 컨텍스트 설명 시간 대폭 단축

### ExamBank-V2 구축 준비
- **혁신적 기반**: npx cursor-bank init으로 프로젝트 초기화
- **완전 자동화**: 조대표 철학 → Rules 입력 → AI 자동 적용
- **품질 일관성**: 모든 개발 작업에 동일한 기준 자동 적용

---

## 9. 마스터 데이터 활용 전략 (NEW)

### 데이터 보안 원칙
- **로컬 테스트**: 실제 마스터 데이터는 조대표 PC에서만
- **공개 환경**: GitHub Pages에는 더미 데이터만 사용
- **단계별 접근**: 구조 검증 → 로컬 테스트 → 상용화

### IBEX ID 체계 완전 활용
- **전체 1,439개 문제**: 20-30회 전체 회차 적용 준비
- **확장 가능성**: 57,600개 콘텐츠로 확장 가능한 구조
- **추적성**: 모든 데이터의 출처와 변경 이력 완전 추적

---

## 10. 기타 참고 사항 (확장)

### 개발 환경 및 도구
- **작업폴더**: d:\AI_Project\ExamBank 전용
- **파일 관리**: text-editor 사용, filesystem은 구조파악용만
- **파일 크기**: 모든 파일 3K 이내로 제한

### 문서화 및 기록
- **한글 주석**: 주요 함수/로직에 필수
- **마스터플랜 업데이트**: 모든 주요 작업 후 자동 생성
- **작업로그**: 각 브랜치별 과정과 결과 기록

### 코드 품질 관리
- **신규 기능 추가**: MemoryBank와 RULE 문서 동시 업데이트
- **규칙 위반**: 코드 리뷰에서 반드시 지적
- **지속적 개선**: 사용자 피드백 기반 반복 개선